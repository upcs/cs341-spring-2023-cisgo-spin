{"version":3,"file":"DropdownColors.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/toolbar/DropdownColors.ts"],"names":[],"mappings":"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","sourcesContent":["import { Color, color } from \"../../../core/util/Color\";\r\n\r\nimport { ColorSet } from \"../../../core/util/ColorSet\";\r\nimport { Dropdown, IDropdownSettings, IDropdownPrivate, IDropdownEvents } from \"./Dropdown\"\r\n\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n\r\nexport interface IDropdownColorsSettings extends IDropdownSettings {\r\n\tcolors?: ColorSet;\r\n\tuseOpacity?: boolean;\r\n}\r\n\r\n\r\nexport interface IDropdownColorsPrivate extends IDropdownPrivate {\r\n\tlist?: HTMLUListElement;\r\n\tcolor?: Color;\r\n\topacity?: number;\r\n}\r\n\r\nexport interface IDropdownColorsEvents extends IDropdownEvents {\r\n\tinvoked: {\r\n\t\tcolor: Color;\r\n\t};\r\n\r\n\tinvokedOpacity: {\r\n\t\topacity: number;\r\n\t};\r\n}\r\n\r\n/**\r\n * A dropdown used for color picker control.\r\n *\r\n * Should not be used as standalone control.\r\n */\r\nexport class DropdownColors extends Dropdown {\r\n\tpublic static className: string = \"DropdownColors\";\r\n\tpublic static classNames: Array<string> = Dropdown.classNames.concat([DropdownColors.className]);\r\n\r\n\tdeclare public _settings: IDropdownColorsSettings;\r\n\tdeclare public _privateSettings: IDropdownColorsPrivate;\r\n\tdeclare public _events: IDropdownColorsEvents;\r\n\r\n\t// private _itemDisposers: Array<IDisposer> = [];\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\t\tthis._root.addDisposer(this);\r\n\t}\r\n\r\n\tprotected _initElements(): void {\r\n\t\tsuper._initElements();\r\n\r\n\t\t// Create container\r\n\t\tconst container = this.getPrivate(\"container\")!;\r\n\r\n\t\t// Create list\r\n\t\tconst list = document.createElement(\"ul\");\r\n\t\tlist.className = \"am5stock-control-colors\";\r\n\t\tcontainer.appendChild(list);\r\n\t\tthis.setPrivate(\"list\", list);\r\n\r\n\t\tthis._initItems();\r\n\t}\r\n\r\n\tprotected _initItems(): void {\r\n\t\tconst list = this.getPrivate(\"list\")!;\r\n\t\tlist.innerHTML = \"\";\r\n\r\n\t\tlet cs = this.get(\"colors\");\r\n\t\tif (!cs) {\r\n\t\t\tcs = ColorSet.new(this._root, {});\r\n\t\t}\r\n\t\tconst colors = cs.get(\"colors\", []);\r\n\t\t$array.each(colors, (item) => {\r\n\t\t\tthis.addItem(item);\r\n\t\t});\r\n\t\tthis._initOpacity();\r\n\t}\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"colors\") || this.isDirty(\"useOpacity\") || this.isPrivateDirty(\"color\") || this.isPrivateDirty(\"opacity\")) {\r\n\t\t\tthis._initItems();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected _dispose(): void {\r\n\t\tsuper._dispose();\r\n\t}\r\n\r\n\tpublic addItem(color: Color): void {\r\n\t\tconst currentColor = this.getPrivate(\"color\") ? this.getPrivate(\"color\")!.hex : 0;\r\n\t\tconst list = this.getPrivate(\"list\")!;\r\n\t\tconst item = document.createElement(\"li\");\r\n\t\titem.className = \"am5stock-control-color\";\r\n\t\tif (currentColor == color.hex) {\r\n\t\t\titem.className += \" am5stock-control-active\";\r\n\t\t}\r\n\t\titem.style.background = color.toCSS();\r\n\t\tlist.appendChild(item);\r\n\r\n\t\t// Add click event\r\n\t\tthis._disposers.push($utils.addEventListener(item, \"click\", (_ev) => {\r\n\t\t\tthis.hide();\r\n\t\t\tthis.events.dispatch(\"invoked\", {\r\n\t\t\t\ttype: \"invoked\",\r\n\t\t\t\tcolor: color,\r\n\t\t\t\ttarget: this\r\n\t\t\t});\r\n\t\t}));\r\n\t}\r\n\r\n\tprotected _initOpacity(): void {\r\n\t\tif (this.get(\"useOpacity\")) {\r\n\t\t\tconst currentOpacity = this.getPrivate(\"opacity\", 1);\r\n\t\t\tconst list = this.getPrivate(\"list\")!;\r\n\t\t\tconst hr = document.createElement(\"hr\");\r\n\t\t\tlist.appendChild(hr);\r\n\r\n\t\t\tfor (let opacity = 100; opacity >= 0; opacity -= 25) {\r\n\t\t\t\tconst fill = color(0x000000);\r\n\t\t\t\tconst item = document.createElement(\"li\");\r\n\t\t\t\titem.innerHTML = opacity + \"%\";\r\n\t\t\t\titem.className = \"am5stock-control-opacity am5stock-control-opacity-\" + opacity;\r\n\t\t\t\tif (currentOpacity * 100 == opacity) {\r\n\t\t\t\t\titem.className += \" am5stock-control-active\";\r\n\t\t\t\t}\r\n\t\t\t\titem.style.background = fill.toCSS(opacity / 100);\r\n\t\t\t\tlist.appendChild(item);\r\n\r\n\t\t\t\t// Add click event\r\n\t\t\t\tthis._disposers.push($utils.addEventListener(item, \"click\", (_ev) => {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\tthis.events.dispatch(\"invokedOpacity\", {\r\n\t\t\t\t\t\ttype: \"invokedOpacity\",\r\n\t\t\t\t\t\topacity: opacity / 100,\r\n\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t});\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}"]}