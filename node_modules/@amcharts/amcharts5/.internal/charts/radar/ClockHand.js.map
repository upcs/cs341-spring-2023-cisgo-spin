{"version":3,"file":"ClockHand.js","sourceRoot":"","sources":["../../../../../src/.internal/charts/radar/ClockHand.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Axis } from \"../xy/axes/Axis\";\nimport type { AxisRendererCircular } from \"../radar/AxisRendererCircular\";\nimport type { RadarChart } from \"../radar/RadarChart\";\n\nimport { Container, IContainerPrivate, IContainerSettings } from \"../../core/render/Container\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { Percent, percent } from \"../../core/util/Percent\";\n\nimport * as $utils from \"../../core/util/Utils\";\n\n\nexport interface IClockHandSettings extends IContainerSettings {\n\n\t/**\n\t * A width of the tip of the clock hand, in pixels.\n\t *\n\t * @default 1\n\t */\n\ttopWidth?: number;\n\n\t/**\n\t * A width of the base of the clock hand, in pixels.\n\t *\n\t * @default 10\n\t */\n\tbottomWidth?: number;\n\n\t/**\n\t * Radius of the hand, in pixels, or percent (relative to the axis radius).\n\t *\n\t * If set to negative number, will mean number of pixels inwards from the\n\t * axis.\n\t *\n\t * @default 90%\n\t */\n\tradius?: number | Percent;\n\n\t/**\n\t * Inner radius of the hand, in pixels, or percent (relative to the axis\n\t * radius).\n\t *\n\t * If set to negative number, will mean number of pixels inwards from the\n\t * axis.\n\t *\n\t * @default 0\n\t */\n\tinnerRadius?: number | Percent;\n\n\t/**\n\t * Radius of the hand pin (circle at the base of the hand), in pixels, or in\n\t * percent (relative to the axis radius.)\n\t *\n\t * @default 10\n\t */\n\tpinRadius?: number | Percent;\n\n}\n\nexport interface IClockHandPrivate extends IContainerPrivate {\n}\n\n/**\n * A clock hand for use with [[RadarChart]].\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/radar-chart/gauge-charts/#Clock_hands} for more info\n * @important\n */\nexport class ClockHand extends Container {\n\n\tdeclare public _settings: IClockHandSettings;\n\tdeclare public _privateSettings: IClockHandPrivate;\n\n\tpublic static className: string = \"ClockHand\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([ClockHand.className]);\n\n\t/**\n\t * A \"hand\" element.\n\t *\n\t * @default Graphics.new()\n\t */\n\tpublic readonly hand: Graphics = this.children.push(Graphics.new(this._root, { themeTags: [\"hand\"] }));\n\n\t/**\n\t * A \"pin\" element (hand's base).\n\t *\n\t * @default Graphics.new()\n\t */\n\tpublic readonly pin: Graphics = this.children.push(Graphics.new(this._root, { themeTags: [\"pin\"] }));\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"clock\"]);\n\n\t\tsuper._afterNew();\n\n\t\t// to be redrawn when size changes\n\t\tthis.set(\"width\", percent(1));\n\n\t\tthis.adapters.add(\"x\", () => {\n\t\t\treturn 0\n\t\t})\n\n\t\tthis.adapters.add(\"y\", () => {\n\t\t\treturn 0\n\t\t})\n\n\t\tthis.pin.set(\"draw\", (display, graphics: Graphics) => {\n\t\t\tconst parent = graphics.parent as ClockHand;\n\t\t\tif (parent) {\n\t\t\t\tconst dataItem = parent.dataItem;\n\t\t\t\tif (dataItem) {\n\t\t\t\t\tconst axis = dataItem.component as Axis<AxisRendererCircular>;\n\t\t\t\t\tif (axis) {\n\t\t\t\t\t\tconst chart = axis.chart as RadarChart;\n\t\t\t\t\t\tif (chart) {\n\t\t\t\t\t\t\tconst cr = chart.getPrivate(\"radius\", 0);\n\t\t\t\t\t\t\tlet r = $utils.relativeToValue(parent.get(\"pinRadius\", 0), cr);\n\t\t\t\t\t\t\tif(r < 0){\n\t\t\t\t\t\t\t\tr = cr + r;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisplay.moveTo(r, 0)\n\t\t\t\t\t\t\tdisplay.arc(0, 0, r, 0, 360);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tthis.hand.set(\"draw\", (display, graphics: Graphics) => {\n\t\t\tconst parent = graphics.parent as ClockHand;\n\n\t\t\tif (parent) {\n\n\t\t\t\tlet bullet = parent.parent;\n\t\t\t\t// to be redrawn when size changes\n\t\t\t\tif (bullet) {\n\t\t\t\t\tbullet.set(\"width\", percent(1));\n\t\t\t\t}\n\n\t\t\t\tconst dataItem = parent.dataItem;\n\n\t\t\t\tif (dataItem) {\n\t\t\t\t\tconst axis = dataItem.component as Axis<AxisRendererCircular>;\n\t\t\t\t\tif (axis) {\n\t\t\t\t\t\tconst chart = axis.chart as RadarChart;\n\t\t\t\t\t\tif (chart) {\n\t\t\t\t\t\t\tconst bw = parent.get(\"bottomWidth\", 10) / 2;\n\t\t\t\t\t\t\tconst tw = parent.get(\"topWidth\", 0) / 2;\n\t\t\t\t\t\t\tconst cr = chart.getPrivate(\"radius\", 0);\n\t\t\t\t\t\t\tlet r = $utils.relativeToValue(parent.get(\"radius\", 0), cr);\n\n\t\t\t\t\t\t\tif(r < 0){\n\t\t\t\t\t\t\t\tr = cr + r;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet ir = parent.get(\"innerRadius\", 0);\n\n\t\t\t\t\t\t\tif (ir instanceof Percent) {\n\t\t\t\t\t\t\t\tir = $utils.relativeToValue(ir, cr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif (ir < 0) {\n\t\t\t\t\t\t\t\t\tif (ir < 0) {\n\t\t\t\t\t\t\t\t\t\tir = r + ir;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplay.moveTo(ir, -bw);\n\t\t\t\t\t\t\tdisplay.lineTo(r, -tw);\n\t\t\t\t\t\t\tdisplay.lineTo(r, tw);\n\t\t\t\t\t\t\tdisplay.lineTo(ir, bw);\n\t\t\t\t\t\t\tdisplay.lineTo(ir, -bw);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\t\tthis.hand._markDirtyKey(\"fill\");\n\t\tthis.pin._markDirtyKey(\"fill\");\n\t}\n}\n"]}