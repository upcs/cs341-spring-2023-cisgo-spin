<!DOCTYPE html>
<!-- index.html
Created by: Kevin Nguyen
Version 1.1.0
-->
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Admin</title>
    <link href="stylesheets/adminStyle.css" rel="stylesheet" type="text/css" />

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <!-- Link to CSS for Boostrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <script src="javascripts/button.js"></script>
    <!--TODO: find a way for admin-table to connect properly to the page-->
    <script src="javascripts/admin-table.js"></script>
    <script src="javascripts/logout.js"></script>
    <!--Temporary code to connect admin-data to the page-->
    <script>
      $(document).ready(function(){
        //var table = document.getElementById("admin-Table");
        var data = [];
        $("#logout").click(function() {
          $.ajax({
            url: '/logout',
            type: 'DELETE',
            success: function(result) {
              window.location = "/";
            }
          });
        })

        $.getJSON('/admin-data', function(ret){
          rawData = ret;
          data = rawData.map(({name, startdate}) => ({startdate, name}));
          var container = document.getElementById("table-Container");
          
          var val = [];
          for (var i = 0; i < data.length; i++) {
            for (var key in data[i]) {
              if (val.indexOf(key) === -1) {
                val.push(key);
              }
            }
          }
          
          var table = document.createElement("table");
          table.setAttribute("class", "table");

          var tr = table.insertRow(-1);
          var thDateStart = document.createElement("th");
          var thName = document.createElement("th");
          var thAction = document.createElement("th");
          thDateStart.innerHTML = "Date Start";
          thName.innerHTML = "Title";
          thAction.innerHTML = "Action";
          tr.append(thDateStart);
          tr.append(thName);
          tr.append(thAction);
          
          for (let i = 0; i < data.length; i++) {
            tr = table.insertRow(-1);
            for (let j = 0; j < val.length + 1; j++) {
              let tabCell = tr.insertCell(-1);
              if(j == 2){
                tabCell.innerHTML = '<a href="Form.html"> <button type="button">Edit</button> <button type="button">Archive</button> </a>'
              }
              else{
                tabCell.innerHTML = data[i][val[j]];
              }
            }
          }
          
          container.append(table);
        });
      });
    </script>

</head>

<body>
  <header>
    <h1>SPIN Around the World</h1>
    <img class="img-fluid" id="logo" src="img/up-logo.jfif" alt="Logo">
  </header>


  <hr class="thick-hr">

  <div class="main-color">
    <main class="container">
      <br class="thick-br">


    <div>
      <button type="button" id="logout"> Logout</button>
      <p>Select an item from the list below or search using the search bar below to edit an item.
        <br>You can also press add or delete on the right to do those action.</p>
    </div>

    <div>
        <form>
            <label for="search"> search </label>
            <input type="text" id="search" name="searchTextBox">
            <input type="submit" value="Enter">
        </form>
        <a href=advSearch.html style="font-size: 13px">advanced search</a>



        <div class="deleteBtn">
            <button class="openButton" style="float: right;" onclick="openForm()" id="deleteButton">Delete</button>
        </div>
        <div class="loginPopup" id="deletePop">
            <div class="formPopup" id="popupFormDelete">
                <form action="/action_page.php" class="formContainer">
                    <h2>Deletion Form</h2>
                    <label for="Delete">
                        <strong>Select Event</strong>
                    </label>
                    <select class="dropdown-content" name="options" id="options" size="3">
                        <option value="First" id="1st">Spain Study Abroad</option>
                        <option value="Second" id="2nd">Salzberg Project</option>
                        <option value="Third" id="3rd">Paris Study Abroad</option>

                    </select>
                    <button type="submit" class="btn">Delete</button>
                    <button type="button" class="btn cancel" onclick="closeForm()">Cancel</button>
                </form>
            </div>
        </div>
        <a href="Form.html" id="add">
            <button type="button"  class="add-btn">Add</button>
        </a>
    </div>

    <br>
    <br>
    <!-- Todo: Program to add more data onto list, limited by x amount per row -->
    <div id="table-Container">
      <!--Placeholder Table (to be removed)-->
      <!--
      <table class="table" id="admin-Table">
        <tr>
          <th>Date</th>
          <th>Title</th>
          <th>Action</th>
        </tr>
        <tr>
          <td>2/10</td>
          <td>Spain Study Abroad</td>
          <td>
              <a href="Form.html" >
                  <button type="button">Edit</button>
                  <button type="button">Archive</button>
              </a>
          </td>
        </tr>
        <tr>
           Todo: replace with either buttons or an options menu
          <td>2/11</td>
          <td>Salzberg Project</td>
          <td>
              <a href="Form.html">
                  <button type="button">Edit</button>
                  <button type="button">Archive</button>
              </a>
          </td>
        </tr>
        <tr>
          <td>5/20</td>
          <td>Paris Study Abroad</td>
          <td>
              <a href="Form.html">
                  <button type="button">Edit</button>
                  <button type="button">Archive</button>
              </a>
          </td>
        </tr>
      </table>
    -->
    </div>
    <div style="text-align: center;">
      <button type="button">previous</button>
      <a href="">1 </a>
      <a href="">2 </a>
      <a href="">3 </a>
      <button type="button">next</button>
    </div>
    <!-- Todo: Create href pages depending on amount of data
    Todo: program the buttons to navigate pages-->

    <!-- JS plugins for Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <br>

    </main>

  </div>

  <footer>Copyright &copy; Univerity of Portland. All Rights Reserved</footer>


</body>

</html>
